<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
        #txtFileName {
            width: 300px;
        }
        .btnsubmit{border-bottom: #cc4f00 1px solid; border-left: #ff9000 1px solid;border-top: #ff9000 1px solid;   border-right: #cc4f00 1px solid;text-align: center; padding: 2px 10px; line-height: 16px; background: #e36b0f;  height: 24px; color: #fff; font-size: 12px; cursor: pointer;}
    </style>
</head>
<body>

<ul> 
    <li id="example"> 
    <div id="upload_button">文件上传</div>
    <p>已上传的文件列表:</p> 
    <ol class="files"></ol>
</ul>

</body>
	<script src="jquery.js"></script>
	<script src="ajaxupload.3.9.js"></script>
<script type="text/javascript">

    $(document).ready(function(){
    var button = $('#upload_button'), interval;
    var fileType = "all",fileNum = "one"; 
    
    new AjaxUpload(button,{
        action: 'uploadfile.php',
        /*data:{
            'buttoninfo':button.text()
        },*/
        name: 'userfile',
        onSubmit : function(file, ext){
            if(fileType == "pic")
            {
                if (ext && /^(jpg|png|jpeg|gif)$/.test(ext)){
                    this.setData({
                        'info': '文件类型为图片'
                    });
                } else {
                    $('<li></li>').appendTo('#example .files').text('非图片类型文件，请重传');
                    return false;               
                }
            }
                         
            button.text('文件上传中');
             
            if(fileNum == 'one')
                this.disable();
             
            interval = window.setInterval(function(){
                var text = button.text();
                if (text.length < 14){
                    button.text(text + '.');                    
                } else {
                    button.text('文件上传中');             
                }
            }, 200);
        },
        onComplete: function(file, response){
            if(response != "success")
                alert(response);
                 
            button.text('文件上传');
                         
            window.clearInterval(interval);
                         
            this.enable();
             
            if(response == "success");
                $('<li></li>').appendTo('#example .files').text(file);                  
        }
    });
  
});
</script>
</html>